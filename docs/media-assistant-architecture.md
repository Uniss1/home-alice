# –ì–æ–ª–æ—Å–æ–≤–æ–π –ú–µ–¥–∏–∞-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ü–ö: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

> **–î–∞—Ç–∞:** 2026-02-15
> **–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
> **–ê–≤—Ç–æ—Ä:** Claude Opus 4.6 (–ø–æ –∑–∞–ø—Ä–æ—Å—É dmin)

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [High-Level –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#1-high-level-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫](#2-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
3. [–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å—Ä–µ–¥](#3-—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤-—Å—Ä–µ–¥-wsl-vs-windows)
4. [–£–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –†–∏—Å–∫–∏](#4-—É–∑–∫–∏–µ-–º–µ—Å—Ç–∞-–∏-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Ä–∏—Å–∫–∏)
5. [–ò—Ç–æ–≥–æ–≤–∞—è –¢–∞–±–ª–∏—Ü–∞ –°—Ç–µ–∫–∞](#5-–∏—Ç–æ–≥–æ–≤–∞—è-—Ç–∞–±–ª–∏—Ü–∞-—Å—Ç–µ–∫–∞)

---

## 1. High-Level –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Windows Host (–µ–¥–∏–Ω–∞—è —Å—Ä–µ–¥–∞)                   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Audio    ‚îÇ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ Wake     ‚îÇ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ STT        ‚îÇ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ NLP /   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Pipeline ‚îÇ    ‚îÇ Word     ‚îÇ    ‚îÇ Engine     ‚îÇ    ‚îÇ Intent  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ          ‚îÇ    ‚îÇ Detector ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ Router  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Mic +    ‚îÇ    ‚îÇ          ‚îÇ    ‚îÇ faster-    ‚îÇ    ‚îÇ         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Loopback ‚îÇ    ‚îÇ open-    ‚îÇ    ‚îÇ whisper    ‚îÇ    ‚îÇ Regex + ‚îÇ ‚îÇ
‚îÇ  ‚îÇ + AEC    ‚îÇ    ‚îÇ WakeWord ‚îÇ    ‚îÇ (small)    ‚îÇ    ‚îÇ LLM     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                         ‚îÇ      ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                    ‚ñº                                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ              –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (Event Loop)                    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  –°–æ—Å—Ç–æ—è–Ω–∏—è: IDLE ‚Üí LISTENING ‚Üí PROCESSING ‚Üí RESPONDING  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ       ‚îÇ          ‚îÇ              ‚îÇ                               ‚îÇ
‚îÇ       ‚ñº          ‚ñº              ‚ñº                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ
‚îÇ  ‚îÇBrowser ‚îÇ ‚îÇSystem  ‚îÇ   ‚îÇ TTS      ‚îÇ                         ‚îÇ
‚îÇ  ‚îÇAgent   ‚îÇ ‚îÇControl ‚îÇ   ‚îÇ (–∑–≤—É–∫.   ‚îÇ                         ‚îÇ
‚îÇ  ‚îÇ(CDP)   ‚îÇ ‚îÇ(pycaw, ‚îÇ   ‚îÇ  —Å–∏–≥–Ω–∞–ª) ‚îÇ                         ‚îÇ
‚îÇ  ‚îÇ        ‚îÇ ‚îÇwin32)  ‚îÇ   ‚îÇ          ‚îÇ                         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Data Flow (–æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π: "–í–∫–ª—é—á–∏ –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä")

```
1. Mic (16kHz) ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚Üí AEC (–≤—ã—á–∏—Ç–∞–Ω–∏–µ loopback) ‚îÄ‚îÄ‚Üí –ß–∏—Å—Ç—ã–π —Å–∏–≥–Ω–∞–ª
   Loopback ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                       ‚îÇ
                                                         ‚ñº
2. OpenWakeWord.predict(frame)  ‚îÄ‚îÄ‚îÄ "–î–∂–∞—Ä–≤–∏—Å" –æ–±–Ω–∞—Ä—É–∂–µ–Ω
                                         ‚îÇ
                                         ‚ñº
3. üîä –ö–æ—Ä–æ—Ç–∫–∏–π beep (50ms)  +  Mute loopback-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—Å–∏–ª–µ–Ω–∞
                                         ‚îÇ
                                         ‚ñº
4. STT –∑–∞–ø–∏—Å—å (–¥–æ –ø–∞—É–∑—ã VAD, max 5—Å) ‚îÄ‚îÄ‚Üí faster-whisper ‚îÄ‚îÄ‚Üí "–≤–∫–ª—é—á–∏ –∏–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä"
                                                                    ‚îÇ
                                                                    ‚ñº
5. Intent Router: regex match "–≤–∫–ª—é—á–∏ (.+)" ‚îÄ‚îÄ‚Üí intent=PLAY_MEDIA, query="–∏–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä"
                                                                    ‚îÇ
                                                                    ‚ñº
6. Browser Agent:
   a) CDP ‚Üí navigate to video site
   b) –ü–æ–∏—Å–∫ "–∏–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä"
   c) –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Üí –µ—Å–ª–∏ >1 (—Ñ–∏–ª—å–º/—Å–µ—Ä–∏–∞–ª) ‚Üí –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–æ–ø—Ä–æ—Å ‚Üí STT ‚Üí –≤—ã–±–æ—Ä
   d) Click ‚Üí wait for <video> ‚Üí fullscreen ‚Üí play
                                                                    ‚îÇ
                                                                    ‚ñº
7. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä ‚Üí —Å–æ—Å—Ç–æ—è–Ω–∏–µ IDLE (—Å–ª—É—à–∞–µ—Ç wake word)
```

---

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

### 2.1. Wake Word: OpenWakeWord

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | `openwakeword` (Apache 2.0) |
| –ú–æ–¥–µ–ª—å | Custom ONNX, <100KB + 1.5MB embedding |
| CPU/RAM | <1% —è–¥—Ä–∞ / ~30-50MB |
| –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | 200-500ms |
| Python API | –ù–∞—Ç–∏–≤–Ω—ã–π |

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ OpenWakeWord:**
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π** –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–≤–∏–∂–æ–∫, –≥–¥–µ —Ä–µ–∞–ª—å–Ω–æ –Ω–∞—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Ä—É—Å—Å–∫–æ–µ wake word "–î–∂–∞—Ä–≤–∏—Å"
- Porcupine (Picovoice) ‚Äî –ª—É—á—à–∏–π –ø–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ (97%+), –Ω–æ **—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ, –∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ–Ω–ª–∞–π–Ω-–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- Snowboy **–º—ë—Ä—Ç–≤** (–ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç 2020, —Å–µ—Ä–≤–∏—Å –∑–∞–∫—Ä—ã—Ç)
- Mycroft Precise ‚Äî –∂–∏–≤ —á–µ—Ä–µ–∑ OVOS, –Ω–æ —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –Ω–∏—à–µ–≤–∞—è

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –∏ –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ:**

| –î–≤–∏–∂–æ–∫ | –°—Ç–∞—Ç—É—Å | –†—É—Å—Å–∫–∏–π | –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞ |
|---|---|---|---|
| Porcupine | Active | –ù–ï–¢ | –ù–µ—Ç —Ä—É—Å—Å–∫–æ–≥–æ, $6K/–≥–æ–¥ –¥–ª—è –∫–æ–º–º–µ—Ä—Ü–∏–∏ |
| Snowboy | –ú–Å–†–¢–í | N/A | Deprecated, –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ Python 3.9+ |
| Mycroft Precise | OVOS fork | –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ | –ù–∏—à–µ–≤–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞, –Ω—É–∂–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ |
| DaVoice | Commercial | –î–∞ | –ó–∞–∫—Ä—ã—Ç—ã–π –∫–æ–¥, –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ü–µ–Ω–∞ |
| Rustpotter | Active | –î–∞ | –ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–µ—Ç Python API |

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ "–î–∂–∞—Ä–≤–∏—Å":**

```python
# 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Å—ç–º–ø–ª–æ–≤ —á–µ—Ä–µ–∑ Silero TTS / edge-tts (ru voices)
# 2. 10-20 —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —Å–≤–æ–∏–º –≥–æ–ª–æ—Å–æ–º
# 3. –®—É–º–æ–≤–∞—è –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è (–±—ã—Ç–æ–≤–æ–π —à—É–º, –∑–≤—É–∫ —Ñ–∏–ª—å–º–∞)
# 4. –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Google Colab notebook –∏–ª–∏ openwakeword.com (~30-60 –º–∏–Ω)
# 5. –ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏: 0.7-0.8 (–±–∞–ª–∞–Ω—Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å / –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è)
```

### 2.2. STT: –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ö–µ–º–∞

–ù–µ –æ–¥–∏–Ω –¥–≤–∏–∂–æ–∫, –∞ –¥–≤–∞ ‚Äî –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á:

#### –£—Ä–æ–≤–µ–Ω—å 1: Vosk (—Å—Ç—Ä–∏–º–∏–Ω–≥, <100ms –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)

–î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ ("–ø–∞—É–∑–∞", "–≥—Ä–æ–º—á–µ", "–¥–∞/–Ω–µ—Ç").

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | `vosk` |
| –ú–æ–¥–µ–ª—å | `vosk-model-small-ru` (~45MB) –∏–ª–∏ `vosk-model-ru` (~1.5GB) |
| –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | **<100ms** (streaming, partial results) |
| GPU | –ù–µ –Ω—É–∂–µ–Ω (CPU) |
| –¢–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑–∞—Ö | –í—ã—Å–æ–∫–∞—è –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ |

```python
from vosk import Model, KaldiRecognizer
model = Model("vosk-model-small-ru-0.22")
rec = KaldiRecognizer(model, 16000)
rec.AcceptWaveform(audio_data)  # streaming, partial results
```

#### –£—Ä–æ–≤–µ–Ω—å 2: faster-whisper (batch, –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)

–î–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Ñ—Ä–∞–∑ ("–≤–∫–ª—é—á–∏ —Ñ–∏–ª—å–º –∏–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä 2014 –≥–æ–¥–∞").

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | `faster-whisper` (CTranslate2) |
| –ú–æ–¥–µ–ª—å | `large-v3-turbo` (~809M params, int8) |
| –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | 200-400ms –Ω–∞ –∫–æ—Ä–æ—Ç–∫—É—é —Ñ—Ä–∞–∑—É (GPU) |
| VRAM | ~1.5-2GB (int8) |
| –¢–æ—á–Ω–æ—Å—Ç—å (—Ä—É—Å—Å–∫–∏–π) | –û—Ç–ª–∏—á–Ω–∞—è (WER ~3-5% –Ω–∞ FLEURS) |

```python
from faster_whisper import WhisperModel
model = WhisperModel("large-v3-turbo", device="cuda", compute_type="int8")
segments, _ = model.transcribe(audio_array, language="ru")
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ:**

| –î–≤–∏–∂–æ–∫ | –°–∫–æ—Ä–æ—Å—Ç—å | –†—É—Å—Å–∫–∏–π | –ü—Ä–∏—á–∏–Ω–∞ –≤—ã–±–æ—Ä–∞/–æ—Ç–∫–∞–∑–∞ |
|---|---|---|---|
| faster-whisper | 4x –æ—Ç Whisper | –û—Ç–ª–∏—á–Ω–æ | **–í–´–ë–†–ê–ù** ‚Äî –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å |
| whisper.cpp | –õ—É—á—à–µ –Ω–∞ CPU | –û—Ç–ª–∏—á–Ω–æ | –ù–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ Python, –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –Ω–∞ GPU |
| Vosk | –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | –•–æ—Ä–æ—à–æ | **–í–´–ë–†–ê–ù** ‚Äî –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–º–∞–Ω–¥ |
| NVIDIA Canary-1B | 10x –æ—Ç Whisper | –•–æ—Ä–æ—à–æ | –¢—è–∂—ë–ª—ã–π NeMo framework |

**–õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è:**

```
Wake word detected ‚Üí
  if (–∫–æ–Ω—Ç–µ–∫—Å—Ç == –æ–∂–∏–¥–∞–Ω–∏–µ_–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è):    # "–¥–∞/–Ω–µ—Ç" –ø–æ—Å–ª–µ "–≤—ã–∫–ª—é—á–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä"
      use Vosk (streaming, instant)
  else:
      record until VAD silence ‚Üí
      use faster-whisper (batch, accurate)
```

### 2.3. NLP / Intent Router: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–±–µ–∑ LLM –¥–ª—è 90% —Å–ª—É—á–∞–µ–≤)

–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç: –¥–ª—è –º–µ–¥–∏–∞-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ **LLM ‚Äî –æ–≤–µ—Ä–∫–∏–ª–ª**. –ù–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –∫–æ–Ω–µ—á–Ω—ã–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π.

#### –£—Ä–æ–≤–µ–Ω—å 1: Regex/Keyword Router (–æ—Å–Ω–æ–≤–Ω–æ–π, <1ms)

```python
INTENTS = {
    r"(?:–≤–∫–ª—é—á–∏|–ø–æ—Å—Ç–∞–≤—å|–∑–∞–ø—É—Å—Ç–∏)\s+(.+)":          "PLAY_MEDIA",
    r"(?:–ø–∞—É–∑–∞|—Å—Ç–æ–ø|–æ—Å—Ç–∞–Ω–æ–≤–∏)":                     "PAUSE",
    r"(?:–ø—Ä–æ–¥–æ–ª–∂–∏|–∏–≥—Ä–∞–π|play)":                     "RESUME",
    r"(?:–≥—Ä–æ–º—á–µ|–ø—Ä–∏–±–∞–≤—å –∑–≤—É–∫)":                      "VOLUME_UP",
    r"(?:—Ç–∏—à–µ|—É–±–∞–≤—å –∑–≤—É–∫)":                          "VOLUME_DOWN",
    r"(?:–≥—Ä–æ–º–∫–æ—Å—Ç—å)\s+(\d+)":                        "VOLUME_SET",
    r"(?:–≤—ã–∫–ª—é—á–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä|shutdown)":               "SHUTDOWN_CONFIRM",
    r"(?:–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏|–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)":                 "REBOOT_CONFIRM",
    r"(?:–Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω|—Ñ—É–ª—Å–∫—Ä–∏–Ω|fullscreen)":        "FULLSCREEN",
    r"(?:–∑–∞–∫—Ä–æ–π|–≤—ã–π–¥–∏)":                             "CLOSE",
}

def route_intent(text: str) -> tuple[str, str]:
    text = text.lower().strip()
    for pattern, intent in INTENTS.items():
        m = re.match(pattern, text)
        if m:
            return intent, m.group(1) if m.lastindex else ""
    return "UNKNOWN", text
```

#### –£—Ä–æ–≤–µ–Ω—å 2: –õ–æ–∫–∞–ª—å–Ω–∞—è LLM (fallback –¥–ª—è –Ω–µ—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥)

–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ regex –Ω–µ —Å–º–∞—Ç—á–∏–ª ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∞—è LLM.

| –ú–æ–¥–µ–ª—å | Params | VRAM (Q4) | –†—É—Å—Å–∫–∏–π | Tool calling |
|---|---|---|---|---|
| **Qwen3-4B** | 4B | ~3GB | –û—Ç–ª–∏—á–Ω—ã–π | –ù–∞—Ç–∏–≤–Ω—ã–π |
| Phi-4-mini | 3.8B | ~3GB | –°—Ä–µ–¥–Ω–∏–π | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| Llama 3.2-3B | 3B | ~2GB | –°–ª–∞–±—ã–π | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Qwen3-4B —á–µ—Ä–µ–∑ Ollama** ‚Äî –ª—É—á—à–∏–π —Ä—É—Å—Å–∫–∏–π —Å—Ä–µ–¥–∏ –º–æ–¥–µ–ª–µ–π —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞, –Ω–∞—Ç–∏–≤–Ω—ã–π tool calling, Apache 2.0.

```yaml
# Ollama –∑–∞–ø—É—Å–∫
# ollama pull qwen3:4b
# ollama serve
```

```python
# Fallback LLM call (—Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤)
import httpx
resp = httpx.post("http://localhost:11434/api/chat", json={
    "model": "qwen3:4b",
    "messages": [{"role": "user", "content": text}],
    "tools": [...]  # tool definitions
})
```

### 2.4. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞: Playwright CDP

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Playwright | Puppeteer | Selenium |
|---|---|---|---|
| –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –±—Ä–∞—É–∑–µ—Ä—É | `connect_over_cdp()` | `connect()` | –ù–µ—Ç (–Ω—É–∂–µ–Ω driver) |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å uBlock Origin | –î–∞ (—Ä–µ–∞–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä) | –î–∞ | –î–∞ |
| API —É–¥–æ–±—Å—Ç–≤–æ | –õ—É—á—à–∏–π | –•–æ—Ä–æ—à–∏–π | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π |
| JavaScript execution | –ù–∞—Ç–∏–≤–Ω—ã–π | –ù–∞—Ç–∏–≤–Ω—ã–π | –ß–µ—Ä–µ–∑ WebDriver |
| –Ø–∑—ã–∫ | Python/JS/C# | JS only | –õ—é–±–æ–π |

**–ö–ª—é—á–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
Chrome –∑–∞–ø—É—â–µ–Ω —Å --remote-debugging-port=9222
         ‚îÇ
         ‚ñº
Playwright connect_over_cdp("http://localhost:9222")
         ‚îÇ
         ‚îú‚îÄ‚îÄ navigate(video_site_url)
         ‚îú‚îÄ‚îÄ fill(search_input, "–∏–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä")
         ‚îú‚îÄ‚îÄ click(result)
         ‚îú‚îÄ‚îÄ wait_for("video")
         ‚îú‚îÄ‚îÄ evaluate("document.querySelector('video').requestFullscreen()")
         ‚îî‚îÄ‚îÄ evaluate("document.querySelector('video').play()")
```

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã:** –ò—Å–ø–æ–ª—å–∑—É–π —Ä–µ–∞–ª—å–Ω—ã–π Chrome —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º uBlock Origin. Playwright CDP –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –±—Ä–∞—É–∑–µ—Ä—É, –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å ‚Äî –≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç.

### 2.5. –°–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å: pycaw + win32api

| –ó–∞–¥–∞—á–∞ | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|---|---|---|
| –ì—Ä–æ–º–∫–æ—Å—Ç—å | `pycaw` (IAudioEndpointVolume) | –ì–æ—Ç–æ–≤–æ (–∏–∑ home_alice) |
| Mute/Unmute | `pycaw` (SetMute) | –ì–æ—Ç–æ–≤–æ (–∏–∑ home_alice) |
| Shutdown/Reboot | `subprocess` ‚Üí `shutdown.exe` | –ì–æ—Ç–æ–≤–æ (–∏–∑ home_alice) |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞–º–∏ | `win32gui` | –ì–æ—Ç–æ–≤–æ (–∏–∑ home_alice) |
| Media keys (play/pause) | `win32api.keybd_event` –∏–ª–∏ `ctypes.SendInput` | **–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å** |

**Media keys ‚Äî –≤–∞–∂–Ω—ã–π –Ω—é–∞–Ω—Å:**

PyAutoGUI **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –º–µ–¥–∏–∞-–∫–ª–∞–≤–∏—à–∏. –ù—É–∂–µ–Ω win32api:

```python
import win32api
import win32con

VK_MEDIA_PLAY_PAUSE = 0xB3
VK_MEDIA_NEXT_TRACK = 0xB0
VK_MEDIA_PREV_TRACK = 0xB1
VK_VOLUME_MUTE = 0xAD
VK_VOLUME_DOWN = 0xAE
VK_VOLUME_UP = 0xAF

def press_media_key(vk_code):
    win32api.keybd_event(vk_code, 0, 0, 0)
    win32api.keybd_event(vk_code, 0, win32con.KEYEVENTF_KEYUP, 0)
```

---

## 3. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å—Ä–µ–¥ (WSL vs Windows)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í—Å—ë –Ω–∞ Windows

```
‚îå‚îÄ Windows Python ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Audio capture (PyAudioWPatch) ‚Üê WASAPI               ‚îÇ
‚îÇ  OpenWakeWord (ONNX Runtime)                          ‚îÇ
‚îÇ  Vosk (CPU inference)                                 ‚îÇ
‚îÇ  faster-whisper (CUDA —á–µ—Ä–µ–∑ Windows NVIDIA drivers)   ‚îÇ
‚îÇ  Ollama (Windows native build, CUDA)                  ‚îÇ
‚îÇ  Playwright CDP                                       ‚îÇ
‚îÇ  pycaw, win32gui, subprocess                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ—á–µ–º—É –ù–ï WSL –¥–ª—è AI-–±—ç–∫–µ–Ω–¥–∞:**

1. **CUDA –≤ WSL2** —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏. –ü—Ä—è–º–æ–π CUDA —á–µ—Ä–µ–∑ Windows ‚Äî –ø—Ä–æ—â–µ
2. **–ê—É–¥–∏–æ –≤ WSL2** ‚Äî **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**. –ú–∏–∫—Ä–æ—Ñ–æ–Ω –∏ WASAPI loopback –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. PulseAudio bridge —Ö—Ä—É–ø–∫–∏–π
3. **pycaw, win32gui** ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ Windows
4. **Playwright CDP** ‚Äî –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Windows Chrome
5. **faster-whisper** –∏ **Ollama** ‚Äî –æ–±–∞ –∏–º–µ—é—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ Windows-–±–∏–ª–¥—ã —Å CUDA

### –ï—Å–ª–∏ –≤—Å—ë –∂–µ –Ω—É–∂–µ–Ω WSL –¥–ª—è —Ç—è–∂—ë–ª–æ–≥–æ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞

```
WSL2 (Ubuntu)                    Windows Host
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ollama server   ‚îÇ‚óÑ‚îÄ‚îÄ TCP ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Audio capture        ‚îÇ
‚îÇ :11434          ‚îÇ  localhost   ‚îÇ Wake word            ‚îÇ
‚îÇ                 ‚îÇ              ‚îÇ STT (faster-whisper) ‚îÇ
‚îÇ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ    ‚îÇ              ‚îÇ Playwright CDP       ‚îÇ
‚îÇ  —Ç—è–∂—ë–ª—ã–µ –º–æ–¥–µ–ª–∏)‚îÇ              ‚îÇ pycaw, win32gui      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

IPC: TCP localhost —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –≤ mirrored networking mode WSL2. –í–∫–ª—é—á–∞–µ—Ç—Å—è –≤ `%USERPROFILE%\.wslconfig`:

```ini
[wsl2]
networkingMode=mirrored
```

**IPC –º–µ—Ö–∞–Ω–∏–∑–º—ã (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ):**

| –ú–µ—Ö–∞–Ω–∏–∑–º | –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å | –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---|---|---|---|
| TCP localhost (mirrored) | <1ms | –í—ã—Å–æ–∫–∞—è | **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** |
| AF_UNIX sockets | N/A | **–°–ª–æ–º–∞–Ω–æ –≤ WSL2** | –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
| Named pipes (npiperelay) | ~5ms | –°—Ä–µ–¥–Ω—è—è | –û–≤–µ—Ä–∫–∏–ª–ª |
| WSL interop (.exe) | 50-200ms | –í—ã—Å–æ–∫–∞—è | –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ |
| gRPC | ~2ms | –í—ã—Å–æ–∫–∞—è | –õ–∏—à–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å |

---

## 4. –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –†–∏—Å–∫–∏

### –†–ò–°–ö 1: Acoustic Echo Cancellation (AEC) ‚Äî –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∏–ª—å–º –∏–≥—Ä–∞–µ—Ç –Ω–∞ –∫–æ–ª–æ–Ω–∫–∞—Ö –ü–ö –Ω–∞ –ø–æ–ª–Ω–æ–π –≥—Ä–æ–º–∫–æ—Å—Ç–∏. –ú–∏–∫—Ä–æ—Ñ–æ–Ω —É–ª–∞–≤–ª–∏–≤–∞–µ—Ç –∑–≤—É–∫ —Ñ–∏–ª—å–º–∞ + –≥–æ–ª–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. Wake word detector –∏ STT –±—É–¥—É—Ç "—Å–ª—ã—à–∞—Ç—å" –¥–∏–∞–ª–æ–≥–∏ –∏–∑ —Ñ–∏–ª—å–º–∞.

**–†–µ—à–µ–Ω–∏–µ: –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  WASAPI Loopback     ‚îÇ
                    ‚îÇ  (PyAudioWPatch)     ‚îÇ
                    ‚îÇ  = reference signal  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇMicrophone‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  SpeexDSP Echo Canceller    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ DeepFilter ‚îÇ
‚îÇ (mic in) ‚îÇ    ‚îÇ  mic_signal - reference      ‚îÇ    ‚îÇ Net / RNN  ‚îÇ
‚îÇ          ‚îÇ    ‚îÇ  = rough voice isolation     ‚îÇ    ‚îÇ Noise      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                          ‚îÇ
                                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                   ‚îÇ  Silero VAD  ‚îÇ
                                                   ‚îÇ  (is speech?)‚îÇ
                                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                          ‚îÇ yes
                                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                   ‚îÇfaster-whisper‚îÇ
                                                   ‚îÇ   (STT)      ‚îÇ
                                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**WASAPI Loopback capture (PyAudioWPatch):**

```python
import pyaudiowpatch as pyaudio

p = pyaudio.PyAudio()
wasapi_loopback = p.get_default_wasapi_loopback()

loopback_stream = p.open(
    format=pyaudio.paInt16,
    channels=wasapi_loopback["maxInputChannels"],
    rate=int(wasapi_loopback["defaultSampleRate"]),
    input=True,
    input_device_index=wasapi_loopback["index"],
    frames_per_buffer=512,
)
# Read frames for echo cancellation reference
data = loopback_stream.read(512)
```

**SpeexDSP Echo Canceller:**

```python
from speexdsp import EchoCanceller

ec = EchoCanceller.create(frame_size=160, filter_length=1024, sample_rate=16000)
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ—Ä–µ–π–º–∞:
clean = ec.process(mic_frame, speaker_frame)  # mic + reference -> clean
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä—é–∫: Auto-Mute –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**

–ö–æ–≥–¥–∞ wake word –æ–±–Ω–∞—Ä—É–∂–µ–Ω ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å —Ñ–∏–ª—å–º–∞ –Ω–∞ 90%. –≠—Ç–æ –¥–∞—ë—Ç —á–∏—Å—Ç–æ–µ –æ–∫–Ω–æ –¥–ª—è STT.

```python
def on_wake_word():
    play_beep()                           # –ó–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª
    original_volume = get_current_volume()
    volume_set(original_volume * 0.1)     # –ü—Ä–∏–≥–ª—É—à–∏—Ç—å –¥–æ 10%
    text = stt_listen(timeout=5)          # –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
    volume_set(original_volume)           # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å
    process_command(text)
```

**AEC –¥–≤–∏–∂–∫–∏ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ):**

| –î–≤–∏–∂–æ–∫ | –¢–∏–ø | Python | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –ó–∞–º–µ—Ç–∫–∏ |
|---|---|---|---|---|
| **SpeexDSP** | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä | `speexdsp-python` | 20-30dB –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ | –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤—Ä–µ–º–µ–Ω–µ–º, –Ω—É–∂–µ–Ω reference signal |
| **WebRTC AEC3** | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä | –ù–µ—Ç –±–∏–Ω–¥–∏–Ω–≥–æ–≤ | –õ—É—á—à–∏–π | –ù–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ Python –±–µ–∑ C++ —Å–±–æ—Ä–∫–∏ |
| **RNNoise** | ML noise suppressor | `pyrnnoise` | –•–æ—Ä–æ—à–æ –¥–ª—è —à—É–º–∞ | –ù–ï echo canceller ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç reference |
| **DeepFilterNet** | ML speech enhancer | `deepfilternet` | SOTA —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ | –ù–ï echo canceller ‚Äî –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ AEC |

**–í–∞–∂–Ω–æ:** Temporal alignment ‚Äî WASAPI loopback –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –ó–∞–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –≤–æ–∑–¥—É—Ö 5-30ms. SpeexDSP –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —á–µ—Ä–µ–∑ cross-correlation.

### –†–ò–°–ö 2: –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è Wake Word

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–≤—É–∫ —Ñ–∏–ª—å–º–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–æ–≤–æ, –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ "–î–∂–∞—Ä–≤–∏—Å" (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Ñ–∏–ª—å–º–∞—Ö Marvel).

**–†–µ—à–µ–Ω–∏—è:**

1. **–î–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ü–æ—Å–ª–µ detection OpenWakeWord ‚Üí –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Vosk
2. **–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä:** Wake word –≤–∞–ª–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç–Ω–µ—Ä–≥–∏—è –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω–µ **–≤—ã—à–µ** —á–µ–º –≤ loopback

```python
def verify_wake_word(mic_energy, loopback_energy, oww_confidence):
    # Wake word –≤–∞–ª–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
    # 1) –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤—ã—Å–æ–∫–∞—è
    # 2) –≠–Ω–µ—Ä–≥–∏—è –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω–µ –∑–∞–º–µ—Ç–Ω–æ –≤—ã—à–µ —á–µ–º –≤ loopback
    #    (–∑–≤—É–∫ –∏–¥—ë—Ç –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞ —Ä—è–¥–æ–º, –∞ –Ω–µ –∏–∑ –∫–æ–ª–æ–Ω–æ–∫)
    energy_ratio = mic_energy / (loopback_energy + 1e-10)
    return oww_confidence > 0.8 and energy_ratio > 1.5
```

3. **Confidence threshold:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ä–æ–≥ 0.8+ (—Ü–µ–Ω–æ–π —Å–Ω–∏–∂–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

### –†–ò–°–ö 3: –¢–∞–π–º–∞—É—Ç –Ω–∞ –æ—Ç–≤–µ—Ç (UX)

**–ü—Ä–æ–±–ª–µ–º–∞:** "–í–∫–ª—é—á–∏ –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä" ‚Üí STT (1-2—Å) + –ø–æ–∏—Å–∫ (2-3—Å) + –Ω–∞–≤–∏–≥–∞—Ü–∏—è (1-2—Å) = 5-7 —Å–µ–∫—É–Ω–¥ –º–æ–ª—á–∞–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**

```
"–î–∂–∞—Ä–≤–∏—Å"     ‚Üí beep (50ms)
[STT: 1.5—Å]   ‚Üí (—Ç–∏—à–∏–Ω–∞, –¥–æ–ø—É—Å—Ç–∏–º–æ)
–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ     ‚Üí "–ò—â—É" (—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, 200ms)
[–ü–æ–∏—Å–∫: 2—Å]   ‚Üí (—Ç–∏—à–∏–Ω–∞ ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)
–ù–∞–π–¥–µ–Ω–æ        ‚Üí "–í–∫–ª—é—á–∞—é –ò–Ω—Ç–µ—Ä—Å—Ç–µ–ª–ª–∞—Ä" (–∏–ª–∏ "–ö–∞–∫–æ–π? –§–∏–ª—å–º –∏–ª–∏ —Å–µ—Ä–∏–∞–ª?")
[–ù–∞–≤–∏–≥–∞—Ü–∏—è]    ‚Üí –í–∏–¥–µ–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–≥—Ä–∞—Ç—å
```

### –†–ò–°–ö 4: Edge Case ‚Äî "–í—ã–∫–ª—é—á–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä"

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```python
async def handle_shutdown_intent():
    # 1. –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π mute —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∑–≤—É–∫–∞
    volume_mute(True)

    # 2. –ü–∞—É–∑–∞ –≤–∏–¥–µ–æ (—á—Ç–æ–±—ã –ø–æ—Å–ª–µ unmute –Ω–µ –±—ã–ª–æ —à—É–º–∞)
    browser.pause_video()

    # 3. –í –ø–æ–ª–Ω–æ–π —Ç–∏—à–∏–Ω–µ –∂–¥—ë–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ Vosk (streaming)
    vosk_recognizer.reset()
    confirmed = await wait_for_confirmation(
        prompt=None,          # –ü–æ–ª–Ω–∞—è —Ç–∏—à–∏–Ω–∞ ‚Äî –Ω–∏–∫–∞–∫–æ–π —Ä–µ—á–∏
        timeout_sec=5,
        accept_words=["–¥–∞", "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é", "–≤—ã–∫–ª—é—á–∞–π"],
        reject_words=["–Ω–µ—Ç", "–æ—Ç–º–µ–Ω–∞", "—Å—Ç–æ–ø"],
    )

    if confirmed:
        shutdown()
    else:
        volume_mute(False)
        browser.play_video()
```

**–ü–æ—á–µ–º—É –±–µ–∑ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:** –ï—Å–ª–∏ —Ñ–∏–ª—å–º –∏–¥—ë—Ç –∏ –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ —Å–∫–∞–∑–∞–ª "–≤—ã–∫–ª—é—á–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä" ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∑–∞–º–æ–ª–∫–∞–µ—Ç –∏ –∂–¥—ë—Ç. –ï—Å–ª–∏ –∑–∞ 5—Å –Ω–∏–∫—Ç–æ –Ω–µ —Å–∫–∞–∑–∞–ª "–¥–∞" ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ñ–∏–ª—å–º. –ë–µ–∑ –ª–∏—à–Ω–µ–≥–æ —à—É–º–∞.

### –†–ò–°–ö 5: GPU contention (–µ—Å–ª–∏ GPU –æ–¥–∏–Ω)

**–ü—Ä–æ–±–ª–µ–º–∞:** faster-whisper, DeepFilterNet, –∏ Ollama (Qwen3) ‚Äî –≤—Å–µ —Ö–æ—Ç—è—Ç GPU.

**–†–µ—à–µ–Ω–∏–µ:**
- **OpenWakeWord** ‚Äî CPU only (ONNX Runtime), –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç
- **Vosk** ‚Äî CPU only, –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç
- **faster-whisper** ‚Äî GPU, –Ω–æ inference ~0.5-2—Å, –∑–∞—Ç–µ–º –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç VRAM
- **DeepFilterNet** ‚Äî CPU (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞ x86)
- **Ollama/Qwen3** ‚Äî GPU, –Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–¥–∫–æ (fallback)

–ü—Ä–∏ 8GB VRAM: faster-whisper `large-v3-turbo` int8 (1.5GB) + Ollama Qwen3-4B Q4 (3GB) = ~4.5GB. –ü–æ–º–µ—â–∞–µ—Ç—Å—è.

---

## 5. –ò—Ç–æ–≥–æ–≤–∞—è –¢–∞–±–ª–∏—Ü–∞ –°—Ç–µ–∫–∞

| –ú–æ–¥—É–ª—å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ | –õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
|---|---|---|---|
| Audio Capture | `PyAudioWPatch` + WASAPI | Windows | real-time |
| AEC | WASAPI loopback + SpeexDSP | Windows CPU | <5ms/frame |
| Noise Suppression | DeepFilterNet –∏–ª–∏ RNNoise | Windows CPU | ~5ms/frame |
| VAD | `silero-vad` (ONNX) | Windows CPU | ~1ms/frame |
| Wake Word | OpenWakeWord (custom "–î–∂–∞—Ä–≤–∏—Å") | Windows CPU | 200-500ms |
| STT (fast) | Vosk `small-ru` | Windows CPU | <100ms |
| STT (accurate) | faster-whisper `large-v3-turbo` int8 | Windows GPU | 200-400ms |
| Intent Router | Regex (primary) | Windows CPU | <1ms |
| NLP fallback | Qwen3-4B via Ollama | Windows GPU | 300-500ms |
| Browser Agent | Playwright CDP | Windows | 1-5—Å |
| Volume Control | pycaw | Windows | instant |
| System Control | subprocess + win32api | Windows | instant |
| Sound feedback | `sounddevice` (beep) | Windows | 50ms |

**–°—É–º–º–∞—Ä–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (fully local):**
- VRAM: ~3.5-4GB (STT + LLM)
- RAM: ~500MB (Vosk + OpenWakeWord + AEC pipeline)
- CPU: <5% –≤ idle (wake word listening), –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Å–ø–ª–µ—Å–∫–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

**–Ø–∑—ã–∫:** Python 3.12+ (–µ–¥–∏–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, asyncio event loop)
**–°—Ä–µ–¥–∞:** Windows, –≤—Å—ë –ª–æ–∫–∞–ª—å–Ω–æ, zero cloud dependencies

**–ö–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

```
pip install faster-whisper silero-vad PyAudioWPatch speexdsp openwakeword
pip install vosk pycaw pywin32 playwright httpx
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π LLM: Ollama (–æ—Ç–¥–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞) + ollama pull qwen3:4b
```
